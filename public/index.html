<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <title>GymRhythm</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- FullCalendar -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>

  <!-- Intro.js (Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø±Ø¦ÙŠ) -->
  <link href="https://cdn.jsdelivr.net/npm/intro.js/minified/introjs.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/intro.js/minified/intro.min.js"></script>

  <style>
    /* ============ Ù„ÙˆØ­ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¹Ø¨Ø± Ù…ØªØºÙŠØ±Ø§Øª CSS ============ */
    :root{
      /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ (Slate Ø¯Ø§ÙƒÙ†) */
      --bg:        #0f172a;
      --surface:   #111827;
      --card:      #1f2937;
      --text:      #e2e8f0;
      --muted:     #94a3b8;
      --border:    #243041;
      --accent:    #2563eb;

      /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø£Ø­Ø¯Ø§Ø«/Ø§Ù„Ø±Ø³Ù… */
      --event-on:   #60a5fa;  /* Ø£Ø²Ø±Ù‚ */
      --event-off:  #64748b;  /* Ø±Ù…Ø§Ø¯ÙŠ */
      --event-done: #22c55e;  /* Ø£Ø®Ø¶Ø± */
    }

    /* Ø±Ù…Ø§Ø¯ÙŠ Word (Ù…Ø³ØªÙˆØ­Ù‰ Ù…Ù† "Dark Gray" ÙÙŠ Ø£ÙˆÙÙŠØ³) */
    body.theme-gray{
      --bg:      #2b2b2b;
      --surface: #2f2f2f;
      --card:    #3a3a3a;
      --text:    #f0f0f0;
      --muted:   #cfcfcf;
      --border:  #4a4a4a;
      --accent:  #2ea3ff;

      --event-on:   #7db7ff;
      --event-off:  #8a8f98;
      --event-done: #34d399;
    }

    /* Ø£ÙˆÙ-ÙˆØ§ÙŠØª ÙØ§ØªØ­ Ù‡Ø§Ø¯Ø¦ */
    body.theme-offwhite{
      --bg:      #f5f6f7;
      --surface: #ffffff;
      --card:    #ffffff;
      --text:    #111827;
      --muted:   #4b5563;
      --border:  #e5e7eb;
      --accent:  #2563eb;

      --event-on:   #3b82f6;
      --event-off:  #9ca3af;
      --event-done: #10b981;
    }

    /* ============ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù„ÙˆØ§Ù† ============ */
    html, body{ height:100%; }
    body{ background:var(--bg); color:var(--text); }
    .navbar{ background:var(--surface); }
    .card{ background:var(--card); color:var(--text); border-radius:14px; border:1px solid var(--border); }
    .nav-link{ color:var(--text); }
    .nav-link.active{ background:#374151; border-color:var(--border); }
    .form-control, .form-select, .btn, .list-group-item{
      background:#fff; color:#111; border-color:var(--border);
    }
    .list-group-item{ background: #0b1220; color: var(--text); }
    body.theme-offwhite .list-group-item{ background:#f3f4f6; color:#111; }

    /* FullCalendar Ø¹Ù†ÙˆØ§Ù† */
    .fc .fc-toolbar-title{ font-size:1.1rem; }

    /* Ø²Ø± Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¹Ø§Ø¦Ù… */
    #helpFab{
      position: fixed; inset-inline-end: 16px; inset-block-end: 16px;
      z-index: 1055; border-radius: 999px; padding: 10px 14px;
      background:var(--accent); color:#fff; border:0; box-shadow: 0 6px 20px rgba(0,0,0,.35);
    }

    /* Intro.js (ÙŠÙ…Ø´ÙŠ Ù…Ø¹ Ø§Ù„Ø«ÙŠÙ…) */
    .introjs-tooltip { background:var(--surface); color:var(--text); border:1px solid var(--border); direction: rtl; text-align: right; }
    .introjs-tooltipbuttons .introjs-button { background:var(--accent); color:#fff; border:0; }
    .introjs-button.introjs-prevbutton { background:#374151; }
    .introjs-helperLayer { box-shadow: 0 0 0 9999px rgba(0,0,0,.55); }
    .introjs-overlay { background: rgba(0,0,0,.55); }
    .introjs-progress { background:#374151; }
    .introjs-progressbar { background:var(--accent) !important; }
  </style>
</head>
<body class="theme-slate">
<nav class="navbar navbar-dark px-3">
  <span class="navbar-brand mb-0 h1">GymRhythm</span>

  <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø«ÙŠÙ… -->
  <div class="ms-auto d-flex align-items-center gap-2">
    <label class="small me-1">Ø§Ù„Ø³Ù‘ÙÙ…Ø©:</label>
    <!-- <select id="themeSelect" class="form-select form-select-sm" style="width:180px">
      <option value="theme-slate">Slate (Ø¯Ø§ÙƒÙ†)</option>
      <option value="theme-gray">Ø±Ù…Ø§Ø¯ÙŠ Word</option>
      <option value="theme-offwhite">Ø£ÙˆÙ-ÙˆØ§ÙŠØª ÙØ§ØªØ­</option>
    </select> -->

    <select id="themeSelect" class="form-select form-select-sm" style="width:180px">
      <option value="theme-slate">Slate (Ø¯Ø§ÙƒÙ†)</option>
      <option value="theme-gray">Ø±Ù…Ø§Ø¯ÙŠ Word</option>
      <option value="theme-offwhite">Ø£ÙˆÙ-ÙˆØ§ÙŠØª ÙØ§ØªØ­</option>
      <option value="theme-sepia">Sepia (Ù…Ø±ÙŠØ­)</option> <!-- ğŸ‘ˆ Ø¬Ø¯ÙŠØ¯ -->
    </select>

  </div>
</nav>

<div class="container my-3">
  <!-- Tabs -->
  <ul class="nav nav-tabs mb-3" id="mainTabs" role="tablist" data-intro="Ù‡Ù†Ø§ ØªØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŒ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©ØŒ ÙˆÙ…Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø¯Ù‘Ù….">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="tab-dashboard" data-bs-toggle="tab"
              data-bs-target="#pane-dashboard" type="button" role="tab">Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="tab-quick" data-bs-toggle="tab"
              data-bs-target="#pane-quick" type="button" role="tab">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="tab-gallery" data-bs-toggle="tab"
              data-bs-target="#pane-gallery" type="button" role="tab">Ù…Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø¯Ù‘Ù…</button>
    </li>
  </ul>

  <div class="tab-content">
    <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© -->
    <div class="tab-pane fade show active" id="pane-dashboard" role="tabpanel">
      <div class="row g-3">
        <div class="col-lg-4 order-lg-1 order-2">
          <div class="card p-3" id="statsCard" data-intro="Ø¥Ø­ØµØ§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©: Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… On/Off ÙˆØ¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ÙÙ†Ø¬Ø²Ø© Ø¢Ø®Ø± 30 ÙŠÙˆÙ….">
            <h5 class="mb-2">Ø¥Ø­ØµØ§Ø¡Ø§Øª</h5>
            <canvas id="statsCanvas" height="180"></canvas>
          </div>
        </div>
        <div class="col-lg-8 order-lg-2 order-1">
          <div class="card p-3" id="calendarCard"
               data-intro="Ø§Ù„ØªÙ‚ÙˆÙŠÙ… ÙŠØ¹Ø±Ø¶ Ø§Ù„Ø®Ø·Ø©. Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ ÙŠÙˆÙ… Ù„ÙØªØ­ Ø§Ù„Ø¶Ø¨Ø·ØŒ Ø£Ùˆ Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø¯Ø« Ù†ÙØ³Ù‡ Ù„Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ &quot;ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°&quot; âœ“.">
            <div id="calendar"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø© -->
    <div class="tab-pane fade" id="pane-quick" role="tabpanel">
      <div class="row g-3">
        <div class="col-lg-6">
          <div class="card p-3 mb-3" id="genCard" data-intro="ÙˆÙ„Ù‘Ø¯ Ø®Ø·Ø© Ø§Ù„Ø´Ù‡Ø± (On/Off Ø¨Ø§Ù„ØªÙ†Ø§ÙˆØ¨).">
            <h5 class="mb-2">ØªÙˆÙ„ÙŠØ¯ Ø´Ù‡Ø± On/Off</h5>
            <div class="row g-2">
              <div class="col-4"><input id="year" class="form-control form-control-sm" type="number" value="2025"></div>
              <div class="col-4"><input id="month" class="form-control form-control-sm" type="number" value="9"></div>
              <div class="col-4 form-check mt-1">
                <input id="startOn" class="form-check-input" type="checkbox" checked>
                <label class="form-check-label" data-bs-toggle="tooltip" title="Ø§Ø¨Ø¯Ø£ Ø¨Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø£ÙˆÙ„ ÙƒÙ€ On">Ø§Ø¨Ø¯Ø£ Ø¨Ù€ On</label>
              </div>
            </div>
            <button id="btnGenerate" class="btn btn-light btn-sm mt-2" data-bs-toggle="tooltip" title="ÙŠÙ†Ø´Ø¦/ÙŠØ­Ø¯Ù‘Ø« Ø§Ù„Ø£ÙŠØ§Ù… Ù„Ù„Ø´Ù‡Ø± Ø§Ù„Ù…Ø®ØªØ§Ø±">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¬Ø¯ÙˆÙ„</button>
            <div id="genMsg" class="small mt-2"></div>
          </div>

          <div class="card p-3" id="quickLogCard" data-intro="Ø³Ø¬Ù‘Ù„ Ø¥Ù†Ø¬Ø§Ø² ÙŠÙˆÙ… Ø¨Ø³Ø±Ø¹Ø©.">
            <h5 class="mb-2">ØªØ³Ø¬ÙŠÙ„ ØªÙ†ÙÙŠØ° Ø§Ù„ÙŠÙˆÙ…</h5>
            <div class="row g-2">
              <div class="col-6"><input id="logDate" type="date" class="form-control form-control-sm"></div>
              <div class="col-6"><input id="logNote" type="text" class="form-control form-control-sm" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø©"></div>
            </div>
            <button id="btnLog" class="btn btn-light btn-sm mt-2">ØªØ³Ø¬ÙŠÙ„ âœ“</button>
            <div id="logMsg" class="small mt-2"></div>
          </div>
        </div>

        <div class="col-lg-6">
          <div class="card p-3" id="uploadCard" data-intro="Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© ØªÙ‚Ø¯Ù‘Ù….">
            <h5 class="mb-2">Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„ØªÙ‚Ø¯Ù‘Ù…</h5>
            <input id="photoFile" type="file" accept="image/*" class="form-control form-control-sm">
            <button id="btnSavePhoto" class="btn btn-light btn-sm mt-2">Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø©</button>
            <div id="photoMsg" class="small mt-2"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="card p-3 mt-3" id="importExportCard" data-intro="Ø§Ù†Ø³Ø® Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø·ØªÙƒ ÙˆØ§Ø±Ø¬Ø¹Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹.">
  <h5 class="mb-2">Ø§Ø³ØªÙŠØ±Ø§Ø¯ / ØªØµØ¯ÙŠØ±</h5>

  <div class="d-flex flex-wrap gap-2 mb-2">
    <button id="btnExportJSON" class="btn btn-light btn-sm">ØªØµØ¯ÙŠØ± JSON (ÙƒØ§Ù…Ù„)</button>
    <button id="btnExportCSV"  class="btn btn-outline-light btn-sm">ØªØµØ¯ÙŠØ± CSV (Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†)</button>
  </div>

  <div class="small text-muted mb-2">
    JSON ÙŠØ´Ù…Ù„: ÙƒÙ„ Ø§Ù„Ø£ÙŠØ§Ù… (date/plan/done) + Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª.  
    CSV ÙŠØ´Ù…Ù„: Ø§Ù„Ø£ÙŠØ§Ù… ÙÙ‚Ø· (date, plan, done).
  </div>

  <div class="border rounded p-2">
    <label class="form-label mb-1">Ø§Ø³ØªÙŠØ±Ø§Ø¯ JSON</label>
    <div class="d-flex align-items-center gap-2">
      <input id="importFile" type="file" accept="application/json" class="form-control form-control-sm">
      <button id="btnImportJSON" class="btn btn-warning btn-sm">Ø§Ø³ØªÙŠØ±Ø§Ø¯</button>
    </div>
    <div id="importMsg" class="small mt-2"></div>
  </div>
</div>


    <!-- Ù…Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø¯Ù‘Ù… -->
    <div class="tab-pane fade" id="pane-gallery" role="tabpanel">
      <div class="row g-3">
        <div class="col-lg-3">
          <div class="card p-3" id="groupsCard" data-intro="Ø£Ù†Ø´Ø¦ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª (Bulk/Cut...). Ø§Ø³Ø­Ø¨ ØµÙˆØ±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ù„Ø¥Ø³Ù†Ø§Ø¯Ù‡Ø§.">
            <h6 class="mb-2">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</h6>
            <div class="input-group input-group-sm mb-2">
              <input id="grpName" class="form-control" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©">
              <button id="btnAddGroup" class="btn btn-light">Ø¥Ø¶Ø§ÙØ©</button>
            </div>
            <ul id="groupsList" class="list-group small"></ul>
          </div>
        </div>
        <div class="col-lg-9">
          <div class="card p-3" id="galleryCard" data-intro="Ø§Ø®ØªØ± ØµÙˆØ±ØªÙŠÙ† (Checkbox) Ø«Ù… &quot;Ù…Ù‚Ø§Ø±Ù†Ø© ØµÙˆØ±ØªÙŠÙ†&quot;.">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h6 class="m-0">Ø§Ù„ØµÙˆØ±</h6>
              <button id="btnCompare" class="btn btn-outline-light btn-sm" disabled>Ù…Ù‚Ø§Ø±Ù†Ø© ØµÙˆØ±ØªÙŠÙ†</button>
            </div>
            <div id="galleryGrid" class="row g-2"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal: Ø¶Ø¨Ø· ÙŠÙˆÙ… -->
<div class="modal fade" id="dayModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content" style="background:var(--card);color:var(--text);border:1px solid var(--border)">
      <div class="modal-header"><h5 class="modal-title">Ø¶Ø¨Ø· Ø§Ù„ÙŠÙˆÙ…</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
      <div class="modal-body">
        <div class="mb-2"><input id="dayDate" type="text" class="form-control" disabled></div>
        <div class="mb-2">
          <label class="form-label">Ø§Ù„Ø®Ø·Ø©</label>
          <select id="dayPlan" class="form-select">
            <option>On</option><option>Off</option>
            <option>Legs</option><option>Push</option><option>Pull</option>
            <option>Chest</option><option>Back</option><option>Shoulders</option>
          </select>
        </div>
        <div class="form-text">Ø§Ù†Ù‚Ø± Ø§Ù„Ø­Ø¯Ø« ÙÙŠ Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ù„ØªØ¨Ø¯ÙŠÙ„ â€œØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°â€.</div>
      </div>
      <div class="modal-footer">
        <button id="saveDay" class="btn btn-light btn-sm">Ø­ÙØ¸</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal: Ù…Ù‚Ø§Ø±Ù†Ø© Ù‚Ø¨Ù„/Ø¨Ø¹Ø¯ -->
<div class="modal fade" id="compareModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content" style="background:var(--card);color:var(--text);border:1px solid var(--border)">
      <div class="modal-header"><h5 class="modal-title">Ù…Ù‚Ø§Ø±Ù†Ø© Ù‚Ø¨Ù„/Ø¨Ø¹Ø¯</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
      <div class="modal-body">
        <div id="compareWrap" style="position:relative;max-width:100%;overflow:hidden"></div>
      </div>
    </div>
  </div>
</div>

<!-- Ø²Ø± Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¹Ø§Ø¦Ù… -->
<button id="helpFab" title="Ø¯Ù„ÙŠÙ„ Ø³Ø±ÙŠØ¹ (F1)">ØŸ</button>

<!-- Bootstrap JS Ø£ÙˆÙ„Ø§Ù‹ -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Ø«Ù… Ø³ÙƒØ±Ø¨Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ -->
<script src="./app.js"></script>
</body>
</html>
